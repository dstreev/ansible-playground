# HDP Environment 01 Servers
all:
  vars:
    ambari_admin_password:   {{ ambari_admin_password }}
    ambari_admin_user:       {{ ambari_admin_user }}
    ambari_major_version:    {{ ambari_major_version }}
    ambari_repo:             {{ ambari_repo }}
    ambari_server:           ambari-{{ env_instance }}.{{ root_domain }}
    ambari_url_base:         http://ambari-{{env_instance}}.{{ root_domain }}:8080
    ambari_version:          {{ ambari_version }}
    blueprint:               {{ blueprint }}
    cluster_name:            DK{{ env_instance }}
    db_ambari_name:          ambari_{{ env_instance }}
    db_druid_name:           druid_{{ env_instance }}
    db_hive_name:            hive_{{ env_instance }}
    db_host:                 {{ db_host }}
    db_oozie_name:           oozie_{{ env_instance }}
    db_password:             hortonworks
    db_ranger_kms_name:      rangerkms_{{ env_instance }}
    db_ranger_name:          ranger_{{ env_instance }}
    db_registry_name:        registry_{{ env_instance }}
    db_streamline_name:      streamline_{{ env_instance }}
    db_superset_name:        superset_{{ env_instance }}
    db_type:                 mysql
    db_user:                 root
    env_instance:            '{{ env_instance }}'
    env_set:                 {{ env_set }}
    hadoop_cli_bin_link:     {{ hadoop_cli_bin_link }}
    hadoop_cli_version:      {{ hadoop_cli_version }}
    hdp_gpl_repo_id:         {{ hdp_gpl_repo_id }}
    hdp_repo_id:             {{ hdp_repo_id }}
    hdp_stack_version:       {{ hdp_stack_version }}
    hdp_stack:               {{ hdp_stack }}
    hdp_utils_repo_id:       {{ hdp_utils_repo_id }}
    hdp_version:             {{ hdp_version }}
    hive_superuser_password: {{ hive_superuser_password }}
    hive_superuser:          {{ hive_superuser }}
    image_tag:               {{ image_tag }}
    mysql_backup_dir:        /hadoop/mysql_backups
    os_type:                 {{ os_type }}
    ranger_admin_password:   {{ ranger_admin_password }}
    ranger_admin_user:       {{ ranger_admin_user }}
    ranger_url_base:         http://{{ ranger_host_base }}-{{env_instance}}.{{ root_domain }}:6080
    repo_server:             {{ repo_host }}
    smoke_tgs_mappers:       4
    smoke_tgs_reducers:      4
    smoke_tgs_size:          1Gb
    tpcds_size:              {{ tpcds_size_gb }}
    tpcds_user:              {{ tpcds_user }}
    vdf_file:                {{ vdf_file }}
    zookeeper_server:        {{ zookeeper_host }}.{{ root_domain }}

    hdp_repo_url:            {{ hdp_repo_url }}
    hdp_utils_repo_url:      {{ hdp_utils_repo_url }}
    hdp_gpl_repo_url:        {{ hdp_gpl_repo_url }}

    ldap_primary_host:       {{ ldap_primary_host }}
    ldap_primary_port:       {{ ldap_primary_port }}
    ldap_secondary_host:     {{ ldap_secondary_host }}
    ldap_secondary_port:     {{ ldap_secondary_port }}

    ldap_ssl:                {{ ldap_ssl }}
    ldap_user_class:         {{ ldap_user_class }}
    ldap_user_attr:          {{ ldap_user_attr }}
    ldap_group_class:        {{ ldap_group_class }}
    ldap_group_attr:         {{ ldap_group_attr }}
    ldap_member_attr:        {{ ldap_member_attr }}
    ldap_dn:                 {{ ldap_dn }}
    ldap_base_dn:            {{ ldap_base_dn }}
    ldap_manager_dn:         {{ ldap_manager_dn }}
    ldap_manager_password:   {{ ldap_manager_password }}
    ldap_referral:           {{ ldap_referral }}
    ldap_bind_anonym:        {{ ldap_bind_anonym }}

    master01:                {{ master01 }}
    master02:                {{ master02 }}
    worker01:                {{ worker01 }}
    worker02:                {{ worker02 }}
    worker03:                {{ worker03 }}

  children:
    hdp:
      hosts:
        WORKER-01:
          ansible_host: {{ worker01 }}
          ansible_port: 220{{ env_instance }}
        WORKER-02:
          ansible_host: {{ worker02 }}
          ansible_port: 220{{ env_instance }}
        WORKERE-03:
          ansible_host: {{ worker03 }}
          ansible_port: 220{{ env_instance }}

      children:
        master:
          hosts:
            MASTER-02:
              ansible_host: {{ master02 }}
              ansible_port: 220{{ env_instance }}

          children:
            sdlc:
              hosts:
                MASTER-02:
                  ansible_host: {{ master02 }}
                  ansible_port: 220{{ env_instance }}

        ambari:
          hosts:
            MASTER-01:
              ansible_host: {{ master01 }}
              ansible_port: 220{{ env_instance }}
